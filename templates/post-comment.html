{% extends 'header.html '%}

{% load static %}

{% block content %}

<div class="container">
    <div class="post">
        <div class="post__header">
            <img class="post__publisher-image"
                 src="https://res.cloudinary.com/intellectfox/image/upload/v1629752958/fe/foxgram/posts/intellectfox_jq4lbe.svg "
                 alt="avatar">
            <span class="post__publisher-name">{{ post.author }}</span>
        </div>
        <img class="post__img"
             src="https://res.cloudinary.com/intellectfox/image/upload/v1629752958/fe/foxgram/posts/post-1_nm8jbv.jpg  "
             alt="post_1">
        <div class="post__footer">
            <div class="like">
                {% if user not in post.likes.all %}
                <form action="{% url 'blog-post-likes' %}" method="post" class="like-form">
                    {% csrf_token %}
                    <input type="hidden" name="user_id" value="{{post.id}}">
                    <button type="submit" class="link-primary btn"
                            style="padding: 0;border: none;font: inherit;color: inherit;background-color: transparent;cursor: pointer">
                        <img style="margin-right: 16px;"
                             src="{% static 'icons/like_off.svg' %}">
                    </button>
                </form>
                {% else %}
                <form action="{% url 'blog-post-likes' %}" method="post" class="like-form">
                    {% csrf_token %}
                    <input type="hidden" name="user_id" value="{{post.id}}">
                    <button type="submit" class="link-primary btn"
                            style="padding: 0;border: none;font: inherit;color: inherit;background-color: transparent;cursor: pointer">
                        <img style="margin-right: 16px;"
                             src="{% static 'icons/like_on.svg' %}"></button>
                </form>
                {% endif %}

                <span class="like__text">{{post.likesCount}} отметок "Нравится"</span>
            </div>
            <div class="description">
                <div class="description__publisher">{{ post.author }}</div>
                <div class="description__text">{{ post.content }}</div>
            </div>
            <div class="published">
                <span class="published_date"> {{post.published_date|date:"F d, Y" }}</span>
            </div>
        </div>
        {% if comments %}
        {% for comment in comments %}
        <div class="post__comment">

            <div class="description__comment">
                <div class="post__publisher-image">
                    <img src="#" alt="photo">
                </div>
                <div>
                    <div class="description__publisher__comment">{{comment.user}} <span
                            class="description__publisher__date">{{comment.created|date:"F d, Y"}}</span></div>
                    <div class="description__text__comment"> {{ comment.content }}</div>
                </div>
                <div class="post__comment__like" style="margin-left: auto">
                    {% if user not in comment.likes.all %}
                    <form action="{% url 'blog-comment-likes' %}" method="post" class="follow-form">
                        {% csrf_token %}
                        <input type="hidden" name="comment_id" value="{{comment.id}}">
                        <button type="submit" class="link-primary btn"
                                style="padding: 0;border: none;font: inherit;color: inherit;background-color: transparent;cursor: pointer">
                            <img class="like__comment-img"
                                 src="{% static 'icons/like_off.svg' %}">
                        </button>
                    </form>
                    {% else %}
                    <form action="{% url 'blog-comment-likes' %}" method="post" class="follow-form">
                        {% csrf_token %}
                        <input type="hidden" name="comment_id" value="{{comment.id}}">
                        <button type="submit" class="link-primary btn"
                                style="padding: 0;border: none;font: inherit;color: inherit;background-color: transparent;cursor: pointer">
                            <img class="like__comment-img"
                                 src="{% static 'icons/like_on.svg' %}"></button>
                        <span class="like__text">{{comment.likesCount}}</span>
                    </form>
                    {% endif %}
                </div>

            </div>
        </div>
        {% endfor %}
        {% endif %}

        <div class="comment-box" style="display:flex;
align-items:center;

padding: 5px 24px;">
                            <div class="post__publisher-image">
                    <img src="#" alt="photo">
                </div>
            <form method="post" action="#" style="  border: 1px solid #dcdcdc;
  padding: 0px 20px 4px 0px;
  width: 500px;
  height: 30px;
  border-radius: 9px;">
                {% csrf_token %}
                <input type="hidden" name="" value="">
                <textarea placeholder="Your message..." name="new_comment" style="  border: none;
  margin: 0;
  outline: none;
  -webkit-appearance: none;
  height: 29px;
  vertical-align: top;
  font-weight: 300;
  font-size: 13px;
  padding: 0 8px 0 0;
  width: 360px;"></textarea>
                <button class="btn-xs"  type="submit" style="  border: none;
  margin: 0;
  padding: 7px 0 0 10px;
  font-weight: 700;
  text-transform: uppercase;
  background-color: transparent;
  cursor: pointer;
  transition: color .2s;"> Comment</button>
            </form>
        </div>
    </div>
</div>

{% endblock content %}

